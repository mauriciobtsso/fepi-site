{% extends 'core/base.html' %}
{% load static %}

{% block title %}Livraria Ramiro Gama - Cat√°logo{% endblock %}

{% block extra_css %}
<style>
    /* Cabe√ßalho da P√°gina */
    .livraria-header { 
        text-align: center; margin-bottom: 50px; 
        background-color: var(--azul-claro); padding: 40px 20px; border-radius: var(--radius);
    }
    .livraria-header h1 { color: var(--azul-escuro); margin-bottom: 10px; font-size: 2.5em; }
    .livraria-header p { color: #666; max-width: 600px; margin: 0 auto; font-size: 1.1em; }

    /* Grid de Livros */
    .catalogo-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); 
        gap: 30px; 
    }

    /* Card do Livro */
    .card-livro { 
        background: white; border-radius: var(--radius); overflow: hidden; 
        transition: 0.3s; border: 1px solid #eee; position: relative;
        display: flex; flex-direction: column;
    }
    .card-livro:hover { 
        transform: translateY(-5px); 
        box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
        border-color: var(--azul-medio);
    }

    /* √Årea da Imagem */
    .capa-wrapper {
        width: 100%; height: 320px; background-color: #f4f4f4;
        position: relative; overflow: hidden;
        border-bottom: 1px solid #eee;
    }
    .capa-livro { 
        width: 100%; height: 100%; object-fit: cover; transition: 0.3s; 
    }
    .card-livro:hover .capa-livro { transform: scale(1.05); }

    /* Corpo do Card */
    .info-livro { padding: 15px; text-align: center; flex: 1; display: flex; flex-direction: column; }
    
    .titulo { 
        font-weight: 700; color: var(--azul-escuro); margin-bottom: 5px; 
        font-size: 1.1em; line-height: 1.3;
    }
    .autor { color: #777; font-size: 0.9em; margin-bottom: 10px; flex: 1; }
    
    .preco-badge {
        background-color: var(--azul-claro); color: var(--azul-escuro);
        font-weight: bold; padding: 5px 10px; border-radius: 20px;
        display: inline-block; margin-bottom: 15px;
    }

    .btn-detalhes {
        display: block; width: 100%; padding: 10px 0;
        background-color: var(--azul-escuro); color: white;
        text-align: center; font-weight: 600; font-size: 0.9em;
        text-decoration: none; border-radius: 6px; transition: 0.2s;
    }
    .btn-detalhes:hover { background-color: var(--dourado); color: #111; }

</style>
{% endblock %}

{% block content %}
<div class="container">
    
    <div class="livraria-header">
        <h1>Livraria Ramiro Gama</h1>
        <p>Conhe√ßa as obras da codifica√ß√£o esp√≠rita e literatura complementar dispon√≠veis em nossa sede.</p>
    </div>

    <div style="margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 10px;">
        <span style="font-weight: bold; color: var(--azul-escuro);">{{ livros|length }} obras dispon√≠veis</span>
        </div>

    <div class="catalogo-grid">
        {% for livro in livros %}
        <div class="card-livro">
            <a href="{% url 'detalhe_livro' livro.id %}" class="capa-wrapper">
                {% if livro.capa %}
                    <img src="{{ livro.capa.url }}" class="capa-livro" alt="{{ livro.titulo }}">
                {% else %}
                    <div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:#999; flex-direction:column;">
                        <span style="font-size:2em;">üìö</span>
                        <span>Sem Capa</span>
                    </div>
                {% endif %}
            </a>
            
            <div class="info-livro">
                <div class="titulo">{{ livro.titulo }}</div>
                <div class="autor">{{ livro.autor }}</div>
                
                <div>
                    <span class="preco-badge">R$ {{ livro.preco }}</span>
                </div>

                <a href="{% url 'detalhe_livro' livro.id %}" class="btn-detalhes">Ver Detalhes</a>
            </div>
        </div>
        {% empty %}
        <div style="grid-column: 1 / -1; text-align: center; padding: 50px;">
            <p>Nenhum livro cadastrado no momento.</p>
        </div>
        {% endfor %}
    </div>

</div>
{% endblock %}