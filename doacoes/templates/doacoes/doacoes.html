{% extends 'core/base.html' %}
{% load static %}

{% block title %}FEPI | Quero Doar{% endblock %}

{% block extra_css %}
<style>
    .header-pagina { text-align: center; margin-bottom: 40px; }
    .header-pagina h2 { font-size: 2.5rem; color: var(--azul-escuro); margin-bottom: 10px; }
    
    .doacao-card { background-color: var(--azul-claro); padding: 30px; border-radius: 12px; margin-bottom: 25px; }
    .doacao-header { 
        display: flex; align-items: center; justify-content: space-between; 
        border-bottom: 2px solid var(--dourado); padding-bottom: 10px; margin-bottom: 20px;
    }
    
    .doacao-header h3 { color: var(--azul-escuro); margin: 0; font-size: 1.5rem; font-weight: 700; }
    .doacao-header i { font-size: 1.5rem; color: var(--dourado); }

    .qrcode-box { 
        display: flex; gap: 30px; align-items: center; 
        padding: 20px 0; border-top: 1px dashed #ccc; 
        margin-top: 20px;
    }
    .qrcode-img { 
        width: 150px; 
        height: 150px; 
        object-fit: contain; 
        border: 2px solid white;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        border-radius: 8px;
    }
    
    .pix-key-display { 
        font-weight: 600; color: #006400; background: #d0f7d0; 
        padding: 10px; border-radius: 6px; font-size: 1rem;
    }
    .detalhes-conta { font-size: 1rem; color: #333; }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="pagina-conteudo" style="max-width: 800px;">
        <div style="text-align: center; margin-bottom: 40px;">
            <h2 class="header-pagina">Apoie a Causa Espírita</h2>
            <p style="font-size: 1.1rem; color: #555;">Sua doação é fundamental para mantermos nossas atividades de estudo e assistência.</p>
        </div>

        {% if formas %}
        <div style="margin-top: 30px;">
            {% for forma in formas %}
            <div class="doacao-card">
                <div class="doacao-header">
                    <h3>{{ forma.titulo }}</h3>
                    <i class="fa-solid fa-heart"></i>
                </div>
                
                <p style="font-size: 0.95rem; color: #333; margin-bottom: 20px;">{{ forma.descricao }}</p>

                {% if forma.tipo == 'PIX' %}
                <div class="qrcode-box">
                    
                    {% if forma.qr_code %}
                        <img src="{{ forma.qr_code.url }}" alt="QR Code PIX" class="qrcode-img">
                    {% else %}
                        <div class="qrcode-img" style="background:#eee; display:flex; align-items:center; justify-content:center; font-size:0.8rem;">Sem QR Code</div>
                    {% endif %}

                    <div style="flex-grow:1;">
                        <span style="font-size: 0.8rem; color: #666; display: block; margin-bottom: 5px;">Chave PIX (Para copiar e colar):</span>
                        <div class="pix-key-display">
                            {{ forma.chave_pix }}
                        </div>
                    </div>
                </div>

                {% elif forma.tipo == 'CONTA' %}
                <div class="detalhes-conta">
                    <p style="margin-bottom:5px;"><i class="fa-solid fa-bank" style="color:var(--azul-escuro); margin-right:5px;"></i> <strong>Banco:</strong> {{ forma.banco }}</p>
                    <p style="margin-bottom:5px;"><i class="fa-solid fa-credit-card" style="color:var(--azul-escuro); margin-right:5px;"></i> <strong>Agência:</strong> {{ forma.agencia }}</p>
                    <p style="margin-bottom:0;"><i class="fa-solid fa-user-check" style="color:var(--azul-escuro); margin-right:5px;"></i> <strong>Favorecido/Conta:</strong> {{ forma.conta }}</p>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p style="text-align: center; color: #888;">Nenhuma forma de doação cadastrada no momento.</p>
        {% endif %}

    </div>
</div>
{% endblock %}